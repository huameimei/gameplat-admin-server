<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gameplat.admin.mapper.activity.MemberActivityDao">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.gameplat.admin.model.domain.Activity">
        <id column="activity_id" property="activityId" />
        <result column="activity_name" property="activityName" />
        <result column="is_package" property="isPackage" />
        <result column="is_charge" property="isCharge" />
        <result column="is_turntable" property="isTurntable" />
        <result column="begin_time" property="beginTime" />
        <result column="end_time" property="endTime" />
        <result column="status" property="status" />
        <result column="create_by" property="createBy" />
        <result column="create_time" property="createTime" />
        <result column="update_by" property="updateBy" />
        <result column="update_time" property="updateTime" />
        <result column="remark" property="remark" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        activity_id, activity_name, is_package, is_charge, is_turntable, begin_time, end_time, status, create_by, create_time, update_by, update_time, remark
    </sql>

    <select id="findList" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from member_activity a
		<where>
			<if test="status!=null">
				and a.status=#{status}
			</if>
			<if test="activityName != null and activityName != 'null' and activityName != ''">
			  and a.`activity_name` LIKE CONCAT('%',#{activityName},'%')
			</if>
			<if test="isPackage != null">
			  and a.`is_package` = #{isPackage}
			</if>
			<if test="isCharge != null">
			  and a.`is_charge` = #{isCharge}
			</if>
			<if test="isTurntable != null">
			  and a.`is_turntable` = #{isTurntable}
			</if>
		</where>
	</select>

	<insert id="insert" useGeneratedKeys="true" keyProperty="activity_id">
		insert into
		member_activity(activity_id,
		activity_name, is_package, is_charge, is_turntable, begin_time, end_time,
		<if test="remark != null and remark != ''">remark,</if>
		create_by,create_time)
		values
		(#{activityId},
		#{activityName},#{isPackage},#{isCharge},#{isTurntable},#{beginTime},#{endTime},
		<if test="remark != null and remark != ''">#{remark},</if>
		#{createBy},#{createTime})
	</insert>

	<update id="update">
	update member_activity
	        <set>
            <if test="activityName != null and activityName != ''">activity_name = #{activityName},</if>
            <if test="isPackage != null ">is_package = #{isPackage},</if>
            <if test="isCharge != null ">is_charge = #{isCharge},</if>
            <if test="isTurntable != null ">is_turntable = #{isTurntable},</if>
            <if test="beginTime != null ">begin_time = #{beginTime},</if>
            <if test="endTime != null ">end_time = #{endTime},</if>
            <if test="remark != null and remark != ''">remark=#{remark},</if>
            <if test="status != null">status=#{status},</if>
            update_by = #{updateBy},
            update_time = sysdate()
        </set>
        WHERE activity_id = #{activityId}
	</update>

	<delete id="deleteByIds" parameterType="int">
		delete from member_activity where activity_id in
		<foreach collection="array" item="id" open="(" separator="," close=")">
			#{id}
		</foreach>
	</delete>

</mapper>
